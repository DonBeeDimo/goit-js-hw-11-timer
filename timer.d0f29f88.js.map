{"version":3,"sources":["timer.js"],"names":["CountdownTimer","constructor","selector","targetDate","intervalId","isActive","refs","days","document","querySelector","hours","mins","secs","calendar","start","getValueCalendar","alert","Date","getTime","setInterval","currentTime","now","deltaTime","updateClockface","stop","clearInterval","time","pad","Math","floor","textContent","value","String","padStart","timer","startBtn","addEventListener","bind","stopBtn"],"mappings":";;;AAyEE,aAzEF,QAAA,oBAEA,MAAMA,EACFC,aAAY,SAACC,EAAD,WAAWC,IACdD,KAAAA,SAAWA,EACXC,KAAAA,WAAaA,EACbC,KAAAA,WAAa,KACbC,KAAAA,UAAW,EACXC,KAAAA,KAAO,CACRC,KAAMC,SAASC,iBAAiB,KAAKP,gCACrCQ,MAAOF,SAASC,iBAAiB,KAAKP,iCACtCS,KAAMH,SAASC,iBAAiB,KAAKP,gCACrCU,KAAMJ,SAASC,iBAAiB,KAAKP,gCACrCW,SAAUL,SAASC,cAAc,cAIzCK,QACO,GAAA,KAAKT,SACJ,OAGD,IAAC,KAAKU,mBACEC,OAAAA,MAAM,wBAGZX,KAAAA,UAAW,EACVF,MAAAA,EAAa,IAAIc,KAAK,KAAKF,oBAAoBG,UAEhDd,KAAAA,WAAae,YAAY,KACpBC,MAAAA,EAAcH,KAAKI,MACnBC,EAAYnB,EAAaiB,EAC1BG,KAAAA,gBAAgBD,IACtB,KAGPE,OACIC,cAAc,KAAKrB,YACdC,KAAAA,UAAW,EACXkB,KAAAA,gBAAgB,GAGzBA,gBAAgBG,GACNnB,MAAAA,EAAO,KAAKoB,IAAIC,KAAKC,MAAMH,EAAQ,QACnChB,EAAQ,KAAKiB,IAAIC,KAAKC,MAAOH,EAAQ,MAAyB,OAC9Df,EAAO,KAAKgB,IAAIC,KAAKC,MAAOH,EAAQ,KAAoB,MACxDd,EAAO,KAAKe,IAAIC,KAAKC,MAAOH,EAAQ,IAAc,MAEnDpB,KAAAA,KAAKC,KAAKuB,YAAcvB,EACxBD,KAAAA,KAAKI,MAAMoB,YAAcpB,EACzBJ,KAAAA,KAAKK,KAAKmB,YAAcnB,EACxBL,KAAAA,KAAKM,KAAKkB,YAAclB,EAGjCe,IAAII,GACOC,OAAAA,OAAOD,GAAOE,SAAS,EAAG,KAGrClB,mBACW,OAAA,KAAKT,KAAKO,SAASkB,OAKlC,MAAMG,EAAQ,IAAIlC,EAAe,CAC7BE,SAAU,WACVC,WAAY,IAAIc,KAAK,kBAGjBkB,EAAW3B,SAASC,cAAc,yBACxC0B,EAASC,iBAAiB,QAASF,EAAMpB,MAAMuB,KAAKH,IAEpD,MAAMI,EAAU9B,SAASC,cAAc,wBACvC6B,EAAQF,iBAAiB,QAASF,EAAMV,KAAKa,KAAKH","file":"timer.d0f29f88.js","sourceRoot":"..\\src","sourcesContent":["import './sass/main.scss';\r\n\r\nclass CountdownTimer {\r\n    constructor({selector, targetDate}) {\r\n        this.selector = selector;\r\n        this.targetDate = targetDate;\r\n        this.intervalId = null;\r\n        this.isActive = false;\r\n        this.refs = {\r\n            days: document.querySelector(`${this.selector} [data-value=\"days\"]`),\r\n            hours: document.querySelector(`${this.selector} [data-value=\"hours\"]`),\r\n            mins: document.querySelector(`${this.selector} [data-value=\"mins\"]`),\r\n            secs: document.querySelector(`${this.selector} [data-value=\"secs\"]`),\r\n            calendar: document.querySelector('.calendar'),\r\n        }     \r\n    }\r\n\r\n    start() {\r\n        if(this.isActive) {\r\n            return;\r\n        }\r\n\r\n        if(!this.getValueCalendar()) {\r\n            return alert('Сначала укажите дату');\r\n        }\r\n\r\n        this.isActive = true;\r\n        const targetDate = new Date(this.getValueCalendar()).getTime() \r\n\r\n        this.intervalId = setInterval(() => {\r\n            const currentTime = Date.now();\r\n            const deltaTime = targetDate - currentTime;\r\n            this.updateClockface(deltaTime);\r\n        }, 1000); \r\n    }\r\n\r\n    stop () {\r\n        clearInterval(this.intervalId);\r\n        this.isActive = false;\r\n        this.updateClockface(0);\r\n    }\r\n\r\n    updateClockface(time) {\r\n        const days = this.pad(Math.floor(time / (1000 * 60 * 60 * 24)));\r\n        const hours = this.pad(Math.floor((time % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)));\r\n        const mins = this.pad(Math.floor((time % (1000 * 60 * 60)) / (1000 * 60)));\r\n        const secs = this.pad(Math.floor((time % (1000 * 60)) / 1000));\r\n\r\n        this.refs.days.textContent = days;\r\n        this.refs.hours.textContent = hours;\r\n        this.refs.mins.textContent = mins;\r\n        this.refs.secs.textContent = secs;  \r\n      };\r\n\r\n    pad(value) {\r\n        return String(value).padStart(2, '0');\r\n    }\r\n\r\n    getValueCalendar() {\r\n        return this.refs.calendar.value;\r\n    }\r\n\r\n}\r\n\r\nconst timer = new CountdownTimer({\r\n    selector: '#timer-1',\r\n    targetDate: new Date('Jul 17, 2019'),\r\n  });\r\n\r\n  const startBtn = document.querySelector('[data-action=\"start\"]');\r\n  startBtn.addEventListener('click', timer.start.bind(timer));\r\n\r\n  const stopBtn = document.querySelector('[data-action=\"stop\"]');\r\n  stopBtn.addEventListener('click', timer.stop.bind(timer));"]}